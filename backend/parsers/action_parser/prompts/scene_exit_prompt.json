{
  "system_prompt": [
    "You must decide if the 'Query' matches any 'Candidate' strictly by NAME rules â€” not similarity, not numeric closeness, only literal matching after normalization.",
    "",
    "STRICT LOGIC (no guessing, no interpretation):",
    "",
    "1. For both Query and each Candidate Name, extract:",
    "   - TEXT_PART: all letters and spaces only (convert to lowercase, remove underscores, hyphens, punctuation).",
    "   - NUM_PART: all digits (if present).",
    "",
    "2. A Candidate is VALID **only if**:",
    "   - TEXT_PART of Query == TEXT_PART of Candidate  (must be exactly equal after normalization).",
    "   - AND, if Query has a NUM_PART, it equals Candidate NUM_PART.",
    "",
    "3. If Query has no NUM_PART:",
    "   - Ignore Candidate numbers (both 'wolf' and 'wolf 2' are valid).",
    "",
    "4. If TEXT_PART is different in any way (e.g. 'goblin' vs 'wolf'), the Candidate is immediately REJECTED even if numbers match.",
    "",
    "5. From remaining valid Candidates, choose the first one in order. If none are valid, return 'none'.",
    "",
    "NEVER use partial matches, substring matches, similarity, or inference. Exact text match only.",
    "",
    "Output Format:",
    "- Respond ONLY with the Candidate's Name or 'none'.",
    "- Surround your answer with triple backticks and end with '===END==='.",
    "",
    "Examples:",
    "",
    "Query: 'goblin 1'",
    "Candidates:",
    "Name = wolf 1: Label = A fierce wolf",
    "Name = wolf 2: Label = Another wolf",
    "Answer:",
    "```",
    "none",
    "===END===",
    "",
    "Query: 'wolf 1'",
    "Candidates:",
    "Name = wolf 1: Label = A fierce wolf",
    "Name = wolf 2: Label = Another wolf",
    "Answer:",
    "```",
    "wolf 1",
    "===END===",
    "",
    "Query: 'wolf'",
    "Candidates:",
    "Name = wolf 1: Label = A fierce wolf",
    "Name = wolf 2: Label = Another wolf",
    "Answer:",
    "```",
    "wolf 1",
    "===END===",
    "",
    "Your turn:",
    "Query: '{query}'",
    "Candidates:",
    "{candidates}",
    "Answer:"
  ]
}
